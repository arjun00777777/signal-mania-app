<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Signal Mania</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { background:#0e0e0e; color:#fff; font-family:Arial; padding:16px }
    .card { background:#1c1c1c; padding:16px; border-radius:12px; margin-top:12px }
    button { width:100%; padding:10px; margin-top:8px; border:none; border-radius:8px }
  </style>
</head>
<body>

<h2>ğŸ“Š Signal Mania</h2>

<div class="card" id="profile">Loadingâ€¦</div>

<div class="card">
  <h3>ğŸ‹ Signals</h3>
  <div id="signals">Loadingâ€¦</div>
</div>

<div class="card">
  <h3>ğŸ”” Set Alert</h3>
  <input id="coin" placeholder="BTC">
  <input id="price" placeholder="65000">
  <button onclick="setAlert()">Set Alert</button>
</div>

<div class="card">
  <h3>ğŸš€ Roadmap</h3>
  <ul>
    <li><b>Jan:</b> Launch & referrals âœ…</li>
    <li><b>Late Jan:</b> Telegram Stars ğŸ’</li>
    <li><b>Feb:</b> CM Points & rewards ğŸ¯</li>
    <li><b>Mar:</b> Airdrops & campaigns ğŸª‚</li>
    <li><b>Apr:</b> Advanced insights ğŸ¤–</li>
  </ul>
</div>

<script>
const tg = Telegram.WebApp;
tg.expand();
const uid = tg.initDataUnsafe.user.id;

fetch("https://YOUR_VPS_IP:8080/user", {
  method:"POST",
  headers:{"Content-Type":"application/json"},
  body:JSON.stringify({user_id: uid})
})
.then(r=>r.json())
.then(d=>{
  document.getElementById("profile").innerHTML = `
    <b>${tg.initDataUnsafe.user.first_name}</b><br>
    Status: ${d.is_pro ? "PRO ğŸ’" : "Free ğŸ†“"}<br>
    Referrals: ${d.referrals}/5<br>
    CM Points: ${d.cm_points}
  `;
});

fetch("https://YOUR_VPS_IP:8080/signals", {method:"POST"})
.then(r=>r.json())
.then(s=>{
  document.getElementById("signals").innerHTML =
    s.map(c=>`<p>${c}</p>`).join("");
});

function setAlert(){
  fetch("https://YOUR_VPS_IP:8080/set_alert",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      user_id:uid,
      coin:document.getElementById("coin").value,
      price:document.getElementById("price").value
    })
  });
  alert("Alert set!");
}
</script>

</body>
</html>

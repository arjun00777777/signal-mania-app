<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<title>Whale Intel</title>

<style>
:root{
--bg:#0f172a;
--card:rgba(30,41,59,.85);
--nav:rgba(15,23,42,.98);
--blue:#3b82f6;
--green:#22c55e;
--red:#f87171;
--purple:#a855f7;
--gold:#facc15;
--text:#f8fafc;
--muted:#94a3b8;
}

*{box-sizing:border-box}

body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
background:radial-gradient(circle at top,#1e293b,#0f172a 70%);
color:var(--text);
padding-bottom:78px;
user-select:none;
}

.app{
max-width:520px;
margin:auto;
padding:14px;
}

/* Cards */
.card{
background:linear-gradient(145deg,#1e293b,#0b1220);
border-radius:18px;
padding:16px;
margin-bottom:14px;
border:1px solid rgba(255,255,255,.1);
box-shadow:0 8px 30px rgba(0,0,0,.35);
}

/* Headings */
h2{margin:0 0 6px;font-size:18px}
p{margin:6px 0;font-size:13px;color:#cbd5e1}

/* Tabs */
.tab{display:none}
.tab.active{display:block;animation:fade .25s}
@keyframes fade{from{opacity:0;transform:translateY(6px)}to{opacity:1}}

/* Signal Cards */
.signal{
background:linear-gradient(145deg,#1f2937,#0f172a);
border-radius:16px;
padding:14px;
margin-bottom:12px;
cursor:pointer;
border:1px solid rgba(255,255,255,.08);
}
.signal.open .hidden{display:block}

.row{display:flex;justify-content:space-between;align-items:center}
.hidden{display:none;font-size:12px;margin-top:8px}

.long{color:var(--green);font-weight:700}
.short{color:var(--red);font-weight:700}

.blur{
filter:blur(7px);
opacity:.6;
padding:3px 8px;
background:rgba(255,255,255,.12);
border-radius:6px;
}

/* Buttons */
.btn{
display:block;
width:100%;
padding:12px;
border-radius:12px;
text-align:center;
font-weight:700;
text-decoration:none;
border:none;
margin-top:8px;
}
.binance{background:#f3ba2f;color:#000}
.bybit{background:#181818;color:#fff;border:1px solid #333}
.gray{background:#334155;color:#fff}

/* Premium Badge */
.badge{
display:inline-block;
padding:4px 10px;
border-radius:999px;
font-size:11px;
font-weight:700;
background:linear-gradient(90deg,var(--gold),#f59e0b);
color:#000;
}

/* Bottom Nav */
.nav{
position:fixed;
bottom:0;left:0;right:0;
background:linear-gradient(180deg,#0f172a,#020617);
display:flex;
justify-content:space-around;
padding:10px 0;
border-top:1px solid rgba(255,255,255,.12);
}

.nav-item{
text-align:center;
font-size:10px;
color:var(--muted);
}
.nav-item.active{color:var(--blue)}
.icon{font-size:18px}
</style>
</head>

<body>

<div class="app">

<!-- HOME -->
<div id="home" class="tab active">
<div class="card">
<h2 id="username">Trader</h2>
<p>ğŸ³ Whale intelligence for awareness. <span class="badge">PRO</span> for precision.</p>
</div>

<div class="card">
<h2>ğŸŒ Market Snapshot</h2>
<p>BTC Dominance: <b>52.4%</b></p>
<p>Funding Rate: <b>Neutral</b></p>
<p>Fear & Greed: <b>Greed</b></p>
</div>

<div class="card">
<h2>ğŸ Unlock PRO Free</h2>
<p>Invite <b>5 friends</b> â†’ Get <b>30 days PRO</b></p>
<button class="btn gray" onclick="copyReferral()">Copy Referral Link</button>
</div>
</div>

<!-- SIGNALS -->
<div id="signals" class="tab">
<div class="card">
<h2>ğŸ“ˆ Live Signals <span class="badge">PRO</span></h2>

<div class="signal" onclick="toggle(this)">
<div class="row">
<b>BTC / USDT</b>
<span class="long">LONG</span>
</div>
<p>ğŸ³ Whale buy detected</p>

<div class="hidden">
<p>Entry: <span class="blur">$66,800</span></p>
<p>Target: <span class="blur">$69,420</span></p>
<p>SL: <span class="blur">$65,900</span></p>

<p style="font-size:11px;color:var(--blue)">ğŸ”’ PRO for exact levels</p>
</div>
</div>

<div class="signal" onclick="toggle(this)">
<div class="row">
<b>ETH / USDT</b>
<span class="short">ACCUM</span>
</div>
<p>Smart money inflow</p>

<div class="hidden">
<p>Zone: <span class="blur">$3,850 â€“ $3,780</span></p>
<p style="font-size:11px;color:var(--blue)">ğŸ”’ PRO required</p>
</div>
</div>

<p style="font-size:11px;color:var(--red)">
Free users: 1 alert/day â€¢ PRO: Unlimited
</p>
</div>
</div>

<!-- ROADMAP -->
<div id="roadmap" class="tab">
<div class="card">
<h2>ğŸ›£ï¸ Roadmap</h2>
<p>âœ… Launch</p>
<p>ğŸŸ¡ PRO Access</p>
<p>ğŸ”µ Expansion</p>
</div>
</div>

<!-- PROFILE -->
<div id="profile" class="tab">
<div class="card">
<h2>âš™ï¸ Account</h2>
<p>User ID: <span id="uid">â€”</span></p>
<button class="btn gray">Support</button>
</div>
</div>

</div>

<!-- NAV -->
<div class="nav">
<div class="nav-item active" onclick="openTab('home',this)">
<div class="icon">ğŸ </div>Home
</div>
<div class="nav-item" onclick="openTab('signals',this)">
<div class="icon">ğŸ“¡</div>Signals
</div>
<div class="nav-item" onclick="openTab('roadmap',this)">
<div class="icon">ğŸ›£ï¸</div>Roadmap
</div>
<div class="nav-item" onclick="openTab('profile',this)">
<div class="icon">ğŸ‘¤</div>Profile
</div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

const user = tg.initDataUnsafe?.user;
if(user){
document.getElementById("username").innerText = user.first_name;
document.getElementById("uid").innerText = user.id;
}

async function checkPremium(uid){
    const res = await fetch("http://127.0.0.1:5000/user/status",{
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body:JSON.stringify({ uid })
    });
    const data = await res.json();
    return data.premium === true;
}

async function openTab(id,el){
if(id==="signals"){
    const premium = await checkPremium(user.id);
    if(!premium){
        tg.showPopup({
            title:"ğŸ”’ PRO Required",
            message:"Live signals are available for PRO users only.\n\nInvite 5 friends or upgrade.",
            buttons:[{type:"ok"}]
        });
        return;
    }
}
document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
document.getElementById(id).classList.add("active");
document.querySelectorAll(".nav-item").forEach(i=>i.classList.remove("active"));
el.classList.add("active");
}

function toggle(card){card.classList.toggle("open");}

function copyReferral(){
const ref=`https://t.me/YOUR_BOT?start=${user.id}`;
navigator.clipboard.writeText(ref);
tg.showPopup({message:"Referral link copied"});
}
</script>

</body>
</html>
